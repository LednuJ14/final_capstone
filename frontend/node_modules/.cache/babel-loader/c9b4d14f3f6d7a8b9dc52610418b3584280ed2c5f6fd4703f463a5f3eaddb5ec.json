{"ast":null,"code":"import { API_ENDPOINTS } from '../config/api';\nclass ApiService {\n  constructor() {\n    // Backward compatibility: support legacy 'token' key as well\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n  setAccessToken(token) {\n    this.accessToken = token;\n    if (token) {\n      localStorage.setItem('access_token', token);\n      // Also write legacy key for compatibility with older code paths\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('token');\n    }\n  }\n  setRefreshToken(token) {\n    this.refreshToken = token;\n    if (token) localStorage.setItem('refresh_token', token);\n  }\n  getHeaders({\n    isFormData = false\n  } = {}) {\n    const headers = {};\n    if (!isFormData) headers['Content-Type'] = 'application/json';\n    if (this.accessToken) headers['Authorization'] = `Bearer ${this.accessToken}`;\n\n    // For subdomain requests, we need to handle the host properly\n    const hostname = window.location.hostname;\n    if (hostname.includes('.localhost')) {\n      // For subdomain requests, we'll rely on CORS instead of host headers\n      // since we can't set host headers from browser JavaScript\n    }\n    return headers;\n  }\n  async request(url, options = {}) {\n    try {\n      const res = await fetch(url, {\n        ...options,\n        headers: {\n          ...this.getHeaders(options),\n          ...(options.headers || {})\n        }\n      });\n      const text = await res.text();\n      let data = null;\n      try {\n        data = text ? JSON.parse(text) : null;\n      } catch {\n        data = null;\n      }\n      if (!res.ok) {\n        // Attempt refresh on 401 if refresh token is present\n        if (res.status === 401 && this.refreshToken && !url.includes('/refresh')) {\n          const refreshed = await this.refresh();\n          if (refreshed) {\n            return this.request(url, options);\n          }\n        }\n\n        // Extract error message from response\n        const message = data && (data.message || data.error) || res.statusText;\n        const error = new Error(message || 'API error');\n        error.status = res.status;\n        error.data = data;\n        throw error;\n      }\n      return data;\n    } catch (error) {\n      // Handle network errors\n      if (!error.status) {\n        const networkError = new Error('Network error - unable to connect to server');\n        networkError.isNetworkError = true;\n        throw networkError;\n      }\n      throw error;\n    }\n  }\n  async refresh() {\n    try {\n      const res = await fetch(API_ENDPOINTS.AUTH.REFRESH, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.refreshToken}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await res.json();\n      if (res.ok && data.access_token) {\n        this.setAccessToken(data.access_token);\n        return true;\n      }\n    } catch (_) {}\n    this.logout();\n    return false;\n  }\n  logout() {\n    this.setAccessToken(null);\n    this.setRefreshToken(null);\n    localStorage.removeItem('user_role');\n    localStorage.removeItem('user_id');\n  }\n\n  // Auth\n  async login(email, password) {\n    const data = await this.request(API_ENDPOINTS.AUTH.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    if (data !== null && data !== void 0 && data.access_token) this.setAccessToken(data.access_token);\n    if (data !== null && data !== void 0 && data.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n  async verify2FA(email, code) {\n    const data = await this.request(API_ENDPOINTS.AUTH.VERIFY_2FA, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        code\n      })\n    });\n    if (data !== null && data !== void 0 && data.access_token) this.setAccessToken(data.access_token);\n    if (data !== null && data !== void 0 && data.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n  async register(userData) {\n    const data = await this.request(API_ENDPOINTS.AUTH.REGISTER, {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n    return data;\n  }\n  async me() {\n    return this.request(API_ENDPOINTS.AUTH.ME);\n  }\n  async forgotPassword(email) {\n    return this.request(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        email\n      })\n    });\n  }\n  async resetPassword(token, email, newPassword) {\n    return this.request(API_ENDPOINTS.AUTH.RESET_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        token,\n        email,\n        new_password: newPassword\n      })\n    });\n  }\n  async healthCheck() {\n    return this.request(API_ENDPOINTS.AUTH.HEALTH);\n  }\n\n  // Properties\n  async getProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.PROPERTIES.LIST}?${qs}` : API_ENDPOINTS.PROPERTIES.LIST;\n    return this.request(url);\n  }\n  async getProperty(id) {\n    return this.request(API_ENDPOINTS.PROPERTIES.DETAIL(id));\n  }\n  async createProperty(payload) {\n    return this.request(API_ENDPOINTS.PROPERTIES.CREATE, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    // Use legacy manager route for compatibility with current backend\n    const base = API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    const url = qs ? `${base}?${qs}` : base;\n    return this.request(url);\n  }\n\n  // Managed Properties (company/building)\n  async listCompanies(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.COMPANIES}?${qs}` : API_ENDPOINTS.MANAGER.COMPANIES;\n    return this.request(url);\n  }\n  async createCompany(payload) {\n    return this.request(API_ENDPOINTS.MANAGER.COMPANIES, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  // Units/Spaces for ManagedProperty\n  async listUnits(managedPropertyId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`);\n  }\n  async createUnit(managedPropertyId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async updateUnit(unitId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, {\n      method: 'PUT',\n      body: JSON.stringify(payload)\n    });\n  }\n  async deleteUnit(unitId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Portal\n  async portalTenantLogin(payload) {\n    return this.request(API_ENDPOINTS.PORTAL.TENANT_LOGIN, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async portalInfo() {\n    // For subdomain requests, we need to send the subdomain info to the backend\n    const hostname = window.location.hostname;\n    let url = API_ENDPOINTS.PORTAL.INFO;\n    console.log('ðŸ” Portal Info Debug:', {\n      hostname,\n      isSubdomain: hostname.includes('.localhost'),\n      isNotLocalhost: hostname !== 'localhost',\n      originalUrl: url\n    });\n\n    // If we're on a subdomain, add it as a query parameter so backend knows which property to load\n    if (hostname.includes('.localhost') && hostname !== 'localhost') {\n      const subdomain = hostname.split('.')[0];\n      url += `?subdomain=${subdomain}`;\n      console.log('âœ… Added subdomain parameter:', subdomain);\n      console.log('ðŸ“¡ Final URL:', url);\n    } else {\n      console.log('âŒ No subdomain detected');\n    }\n    return this.request(url);\n  }\n  async portalTenantDashboard(accessTokenOverride = null) {\n    const headers = accessTokenOverride ? {\n      headers: {\n        Authorization: `Bearer ${accessTokenOverride}`\n      }\n    } : {};\n    return this.request(API_ENDPOINTS.PORTAL.TENANT_DASHBOARD, headers);\n  }\n\n  // Admin\n  async adminDashboard() {\n    return this.request(API_ENDPOINTS.ADMIN.DASHBOARD);\n  }\n  async adminAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ANALYTICS}?${qs}` : API_ENDPOINTS.ADMIN.ANALYTICS;\n    return this.request(url);\n  }\n  async adminAllProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PROPERTIES;\n    return this.request(url);\n  }\n  async getPendingProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.PENDING_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.PENDING_PROPERTIES;\n    return this.request(url);\n  }\n  async approveProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.APPROVE_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async rejectProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.REJECT_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async getAllPortals(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PORTALS}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PORTALS;\n    return this.request(url);\n  }\n  async togglePortal(propertyId) {\n    return this.request(API_ENDPOINTS.ADMIN.TOGGLE_PORTAL(propertyId), {\n      method: 'POST'\n    });\n  }\n  async getPortalAnalytics() {\n    return this.request(API_ENDPOINTS.ADMIN.PORTAL_ANALYTICS);\n  }\n\n  // Tenant specific methods\n  async getTenantInquiries() {\n    return this.request(API_ENDPOINTS.TENANT.INQUIRIES);\n  }\n  async sendTenantMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.TENANT.SEND_MESSAGE, {\n      method: 'POST',\n      body: JSON.stringify({\n        inquiry_id: inquiryId,\n        message\n      })\n    });\n  }\n  async startTenantInquiry(propertyId, message) {\n    return this.request(API_ENDPOINTS.TENANT.START_INQUIRY, {\n      method: 'POST',\n      body: JSON.stringify({\n        property_id: propertyId,\n        message\n      })\n    });\n  }\n  async getActiveProperties(params = {}) {\n    // Sanitize params: drop empty strings/undefined/null to avoid backend 500s\n    const clean = Object.entries(params || {}).reduce((acc, [k, v]) => {\n      if (v === undefined || v === null) return acc;\n      if (typeof v === 'string' && v.trim() === '') return acc;\n      acc[k] = v;\n      return acc;\n    }, {});\n    const qs = new URLSearchParams(clean).toString();\n    // Use the new units API that serves managed units data\n    const url = qs ? `${API_ENDPOINTS.UNITS.ACTIVE}?${qs}` : API_ENDPOINTS.UNITS.ACTIVE;\n    return this.request(url);\n  }\n  async getTenantProfile() {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE);\n  }\n  async updateTenantProfile(profileData) {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n  async uploadTenantProfileImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.TENANT.PROFILE_UPLOAD_IMAGE, {\n      method: 'POST',\n      body: form,\n      // Let browser set Content-Type boundary\n      isFormData: true\n    });\n  }\n  async changeTenantPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.TENANT.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n  async twofaSetup() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_SETUP, {\n      method: 'POST'\n    });\n  }\n  async twofaEnable(code) {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_ENABLE, {\n      method: 'POST',\n      body: JSON.stringify({\n        code\n      })\n    });\n  }\n  async twofaDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_DISABLE, {\n      method: 'POST'\n    });\n  }\n  async twofaEmailEnable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_ENABLE, {\n      method: 'POST'\n    });\n  }\n  async twofaEmailDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_DISABLE, {\n      method: 'POST'\n    });\n  }\n  async getManagerProfile() {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE);\n  }\n  async managerAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.ANALYTICS}?${qs}` : API_ENDPOINTS.MANAGER.ANALYTICS;\n    return this.request(url);\n  }\n  async updateManagerProfile(profileData) {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n}\nconst apiService = new ApiService();\nexport default apiService;","map":{"version":3,"names":["API_ENDPOINTS","ApiService","constructor","accessToken","localStorage","getItem","refreshToken","setAccessToken","token","setItem","removeItem","setRefreshToken","getHeaders","isFormData","headers","hostname","window","location","includes","request","url","options","res","fetch","text","data","JSON","parse","ok","status","refreshed","refresh","message","error","statusText","Error","networkError","isNetworkError","AUTH","REFRESH","method","json","access_token","_","logout","login","email","password","LOGIN","body","stringify","refresh_token","verify2FA","code","VERIFY_2FA","register","userData","REGISTER","me","ME","forgotPassword","FORGOT_PASSWORD","resetPassword","newPassword","RESET_PASSWORD","new_password","healthCheck","HEALTH","getProperties","params","qs","URLSearchParams","toString","PROPERTIES","LIST","getProperty","id","DETAIL","createProperty","payload","CREATE","getMyProperties","base","MANAGER","MY_PROPERTIES","listCompanies","COMPANIES","createCompany","listUnits","managedPropertyId","INQUIRIES","createUnit","updateUnit","unitId","deleteUnit","portalTenantLogin","PORTAL","TENANT_LOGIN","portalInfo","INFO","console","log","isSubdomain","isNotLocalhost","originalUrl","subdomain","split","portalTenantDashboard","accessTokenOverride","Authorization","TENANT_DASHBOARD","adminDashboard","ADMIN","DASHBOARD","adminAnalytics","ANALYTICS","adminAllProperties","ALL_PROPERTIES","getPendingProperties","PENDING_PROPERTIES","approveProperty","propertyId","APPROVE_PROPERTY","rejectProperty","REJECT_PROPERTY","getAllPortals","ALL_PORTALS","togglePortal","TOGGLE_PORTAL","getPortalAnalytics","PORTAL_ANALYTICS","getTenantInquiries","TENANT","sendTenantMessage","inquiryId","SEND_MESSAGE","inquiry_id","startTenantInquiry","START_INQUIRY","property_id","getActiveProperties","clean","Object","entries","reduce","acc","k","v","undefined","trim","UNITS","ACTIVE","getTenantProfile","PROFILE","updateTenantProfile","profileData","uploadTenantProfileImage","file","form","FormData","append","PROFILE_UPLOAD_IMAGE","changeTenantPassword","currentPassword","confirmPassword","CHANGE_PASSWORD","current_password","confirm_password","twofaSetup","TWOFA_SETUP","twofaEnable","TWOFA_ENABLE","twofaDisable","TWOFA_DISABLE","twofaEmailEnable","TWOFA_EMAIL_ENABLE","twofaEmailDisable","TWOFA_EMAIL_DISABLE","getManagerProfile","managerAnalytics","updateManagerProfile","apiService"],"sources":["C:/Users/Lenovo/Desktop/Capstone-Project/main-domain/frontend/src/services/api.js"],"sourcesContent":["import { API_ENDPOINTS } from '../config/api';\n\nclass ApiService {\n  constructor() {\n    // Backward compatibility: support legacy 'token' key as well\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n\n  setAccessToken(token) {\n    this.accessToken = token;\n    if (token) {\n      localStorage.setItem('access_token', token);\n      // Also write legacy key for compatibility with older code paths\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('token');\n    }\n  }\n\n  setRefreshToken(token) {\n    this.refreshToken = token;\n    if (token) localStorage.setItem('refresh_token', token);\n  }\n\n  getHeaders({ isFormData = false } = {}) {\n    const headers = {};\n    if (!isFormData) headers['Content-Type'] = 'application/json';\n    if (this.accessToken) headers['Authorization'] = `Bearer ${this.accessToken}`;\n    \n    // For subdomain requests, we need to handle the host properly\n    const hostname = window.location.hostname;\n    if (hostname.includes('.localhost')) {\n      // For subdomain requests, we'll rely on CORS instead of host headers\n      // since we can't set host headers from browser JavaScript\n    }\n    \n    return headers;\n  }\n\n  async request(url, options = {}) {\n    try {\n      const res = await fetch(url, {\n        ...options,\n        headers: { ...this.getHeaders(options), ...(options.headers || {}) },\n      });\n      \n      const text = await res.text();\n      let data = null;\n      try { \n        data = text ? JSON.parse(text) : null; \n      } catch { \n        data = null; \n      }\n\n      if (!res.ok) {\n        // Attempt refresh on 401 if refresh token is present\n        if (res.status === 401 && this.refreshToken && !url.includes('/refresh')) {\n          const refreshed = await this.refresh();\n          if (refreshed) {\n            return this.request(url, options);\n          }\n        }\n        \n        // Extract error message from response\n        const message = (data && (data.message || data.error)) || res.statusText;\n        const error = new Error(message || 'API error');\n        error.status = res.status;\n        error.data = data;\n        throw error;\n      }\n      \n      return data;\n    } catch (error) {\n      // Handle network errors\n      if (!error.status) {\n        const networkError = new Error('Network error - unable to connect to server');\n        networkError.isNetworkError = true;\n        throw networkError;\n      }\n      throw error;\n    }\n  }\n\n  async refresh() {\n    try {\n      const res = await fetch(API_ENDPOINTS.AUTH.REFRESH, {\n        method: 'POST',\n        headers: { 'Authorization': `Bearer ${this.refreshToken}`, 'Content-Type': 'application/json' },\n      });\n      const data = await res.json();\n      if (res.ok && data.access_token) {\n        this.setAccessToken(data.access_token);\n        return true;\n      }\n    } catch (_) {}\n    this.logout();\n    return false;\n  }\n\n  logout() {\n    this.setAccessToken(null);\n    this.setRefreshToken(null);\n    localStorage.removeItem('user_role');\n    localStorage.removeItem('user_id');\n  }\n\n  // Auth\n  async login(email, password) {\n    const data = await this.request(API_ENDPOINTS.AUTH.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify({ email, password })\n    });\n    if (data?.access_token) this.setAccessToken(data.access_token);\n    if (data?.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n\n  async verify2FA(email, code) {\n    const data = await this.request(API_ENDPOINTS.AUTH.VERIFY_2FA, {\n      method: 'POST',\n      body: JSON.stringify({ email, code })\n    });\n    if (data?.access_token) this.setAccessToken(data.access_token);\n    if (data?.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n\n  async register(userData) {\n    const data = await this.request(API_ENDPOINTS.AUTH.REGISTER, {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n    return data;\n  }\n\n  async me() {\n    return this.request(API_ENDPOINTS.AUTH.ME);\n  }\n\n  async forgotPassword(email) {\n    return this.request(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({ email })\n    });\n  }\n\n  async resetPassword(token, email, newPassword) {\n    return this.request(API_ENDPOINTS.AUTH.RESET_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({ token, email, new_password: newPassword })\n    });\n  }\n\n  async healthCheck() {\n    return this.request(API_ENDPOINTS.AUTH.HEALTH);\n  }\n\n  // Properties\n  async getProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.PROPERTIES.LIST}?${qs}` : API_ENDPOINTS.PROPERTIES.LIST;\n    return this.request(url);\n  }\n\n  async getProperty(id) {\n    return this.request(API_ENDPOINTS.PROPERTIES.DETAIL(id));\n  }\n\n  async createProperty(payload) {\n    return this.request(API_ENDPOINTS.PROPERTIES.CREATE, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    // Use legacy manager route for compatibility with current backend\n    const base = API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    const url = qs ? `${base}?${qs}` : base;\n    return this.request(url);\n  }\n\n  // Managed Properties (company/building)\n  async listCompanies(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.COMPANIES}?${qs}` : API_ENDPOINTS.MANAGER.COMPANIES;\n    return this.request(url);\n  }\n\n  async createCompany(payload) {\n    return this.request(API_ENDPOINTS.MANAGER.COMPANIES, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  // Units/Spaces for ManagedProperty\n  async listUnits(managedPropertyId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`);\n  }\n\n  async createUnit(managedPropertyId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  async updateUnit(unitId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, { method: 'PUT', body: JSON.stringify(payload) });\n  }\n\n  async deleteUnit(unitId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, { method: 'DELETE' });\n  }\n\n  // Portal\n  async portalTenantLogin(payload) {\n    return this.request(API_ENDPOINTS.PORTAL.TENANT_LOGIN, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  async portalInfo() {\n    // For subdomain requests, we need to send the subdomain info to the backend\n    const hostname = window.location.hostname;\n    let url = API_ENDPOINTS.PORTAL.INFO;\n    \n    console.log('ðŸ” Portal Info Debug:', {\n      hostname,\n      isSubdomain: hostname.includes('.localhost'),\n      isNotLocalhost: hostname !== 'localhost',\n      originalUrl: url\n    });\n    \n    // If we're on a subdomain, add it as a query parameter so backend knows which property to load\n    if (hostname.includes('.localhost') && hostname !== 'localhost') {\n      const subdomain = hostname.split('.')[0];\n      url += `?subdomain=${subdomain}`;\n      console.log('âœ… Added subdomain parameter:', subdomain);\n      console.log('ðŸ“¡ Final URL:', url);\n    } else {\n      console.log('âŒ No subdomain detected');\n    }\n    \n    return this.request(url);\n  }\n\n  async portalTenantDashboard(accessTokenOverride = null) {\n    const headers = accessTokenOverride ? { headers: { Authorization: `Bearer ${accessTokenOverride}` } } : {};\n    return this.request(API_ENDPOINTS.PORTAL.TENANT_DASHBOARD, headers);\n  }\n\n  // Admin\n  async adminDashboard() {\n    return this.request(API_ENDPOINTS.ADMIN.DASHBOARD);\n  }\n\n  async adminAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ANALYTICS}?${qs}` : API_ENDPOINTS.ADMIN.ANALYTICS;\n    return this.request(url);\n  }\n\n  async adminAllProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PROPERTIES;\n    return this.request(url);\n  }\n\n  async getPendingProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.PENDING_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.PENDING_PROPERTIES;\n    return this.request(url);\n  }\n\n  async approveProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.APPROVE_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  async rejectProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.REJECT_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  async getAllPortals(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PORTALS}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PORTALS;\n    return this.request(url);\n  }\n\n  async togglePortal(propertyId) {\n    return this.request(API_ENDPOINTS.ADMIN.TOGGLE_PORTAL(propertyId), {\n      method: 'POST'\n    });\n  }\n\n  async getPortalAnalytics() {\n    return this.request(API_ENDPOINTS.ADMIN.PORTAL_ANALYTICS);\n  }\n\n  // Tenant specific methods\n  async getTenantInquiries() {\n    return this.request(API_ENDPOINTS.TENANT.INQUIRIES);\n  }\n\n  async sendTenantMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.TENANT.SEND_MESSAGE, {\n      method: 'POST',\n      body: JSON.stringify({ inquiry_id: inquiryId, message })\n    });\n  }\n\n  async startTenantInquiry(propertyId, message) {\n    return this.request(API_ENDPOINTS.TENANT.START_INQUIRY, {\n      method: 'POST',\n      body: JSON.stringify({ property_id: propertyId, message })\n    });\n  }\n\n  async getActiveProperties(params = {}) {\n    // Sanitize params: drop empty strings/undefined/null to avoid backend 500s\n    const clean = Object.entries(params || {}).reduce((acc, [k, v]) => {\n      if (v === undefined || v === null) return acc;\n      if (typeof v === 'string' && v.trim() === '') return acc;\n      acc[k] = v;\n      return acc;\n    }, {});\n    const qs = new URLSearchParams(clean).toString();\n    // Use the new units API that serves managed units data\n    const url = qs ? `${API_ENDPOINTS.UNITS.ACTIVE}?${qs}` : API_ENDPOINTS.UNITS.ACTIVE;\n    return this.request(url);\n  }\n\n  async getTenantProfile() {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE);\n  }\n\n  async updateTenantProfile(profileData) {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n\n  async uploadTenantProfileImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.TENANT.PROFILE_UPLOAD_IMAGE, {\n      method: 'POST',\n      body: form,\n      // Let browser set Content-Type boundary\n      isFormData: true\n    });\n  }\n\n  async changeTenantPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.TENANT.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n\n  async twofaSetup() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_SETUP, { method: 'POST' });\n  }\n\n  async twofaEnable(code) {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_ENABLE, {\n      method: 'POST',\n      body: JSON.stringify({ code })\n    });\n  }\n\n  async twofaDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_DISABLE, { method: 'POST' });\n  }\n\n  async twofaEmailEnable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_ENABLE, { method: 'POST' });\n  }\n\n  async twofaEmailDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_DISABLE, { method: 'POST' });\n  }\n\n  async getManagerProfile() {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE);\n  }\n\n  async managerAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.ANALYTICS}?${qs}` : API_ENDPOINTS.MANAGER.ANALYTICS;\n    return this.request(url);\n  }\n\n  async updateManagerProfile(profileData) {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n}\n\nconst apiService = new ApiService();\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}