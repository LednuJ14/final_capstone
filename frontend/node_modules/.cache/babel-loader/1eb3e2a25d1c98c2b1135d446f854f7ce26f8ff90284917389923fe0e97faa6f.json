{"ast":null,"code":"import { API_ENDPOINTS } from '../config/api';\nclass ApiService {\n  constructor() {\n    // Backward compatibility: support legacy 'token' key as well\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n  setAccessToken(token) {\n    this.accessToken = token;\n    if (token) {\n      localStorage.setItem('access_token', token);\n      // Also write legacy key for compatibility with older code paths\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('token');\n    }\n  }\n  setRefreshToken(token) {\n    this.refreshToken = token;\n    if (token) localStorage.setItem('refresh_token', token);\n  }\n  refreshTokenFromStorage() {\n    // Refresh token from localStorage in case it was set after API service creation\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n  getHeaders({\n    isFormData = false,\n    noAuth = false\n  } = {}) {\n    const headers = {};\n    if (!isFormData) headers['Content-Type'] = 'application/json';\n    if (this.accessToken && !noAuth) headers['Authorization'] = `Bearer ${this.accessToken}`;\n\n    // For subdomain requests, we need to handle the host properly\n    const hostname = window.location.hostname;\n    if (hostname.includes('.localhost')) {\n      // For subdomain requests, we'll rely on CORS instead of host headers\n      // since we can't set host headers from browser JavaScript\n    }\n    return headers;\n  }\n  async request(url, options = {}) {\n    try {\n      // Refresh token from storage before each request to ensure we have the latest token\n      this.refreshTokenFromStorage();\n\n      // Handle FormData - don't set Content-Type for FormData, browser will set it\n      const isFormData = options.isFormData || options.body instanceof FormData;\n      const headers = {\n        ...this.getHeaders({\n          isFormData,\n          noAuth: options.noAuth\n        }),\n        ...(options.headers || {})\n      };\n\n      // Remove isFormData and responseType from options before passing to fetch\n      const {\n        isFormData: _,\n        responseType,\n        ...fetchOptions\n      } = options;\n      const res = await fetch(url, {\n        ...fetchOptions,\n        headers\n      });\n\n      // Handle blob responses\n      if (responseType === 'blob') {\n        if (!res.ok) {\n          // Attempt refresh on 401 only for protected endpoints (not public auth routes)\n          const isAuthPublic = url.includes('/auth/login') || url.includes('/auth/register') || url.includes('/auth/verify-2fa');\n          const canTryRefresh = res.status === 401 && this.refreshToken && !url.includes('/refresh') && !isAuthPublic && !options._retried;\n          if (canTryRefresh) {\n            const refreshed = await this.refresh();\n            if (refreshed) {\n              return this.request(url, {\n                ...options,\n                _retried: true\n              });\n            }\n          }\n\n          // Try to extract error message from blob response\n          const errorText = await res.text();\n          let errorData = null;\n          try {\n            errorData = errorText ? JSON.parse(errorText) : null;\n          } catch {\n            errorData = null;\n          }\n          const message = errorData && (errorData.message || errorData.error) || res.statusText;\n          const error = new Error(message || 'API error');\n          error.status = res.status;\n          error.data = errorData;\n          throw error;\n        }\n\n        // Return blob directly\n        return await res.blob();\n      }\n\n      // Handle JSON/text responses\n      const text = await res.text();\n      let data = null;\n      try {\n        data = text ? JSON.parse(text) : null;\n      } catch {\n        data = null;\n      }\n      if (!res.ok) {\n        // Attempt refresh on 401 only for protected endpoints (not public auth routes)\n        const isAuthPublic = url.includes('/auth/login') || url.includes('/auth/register') || url.includes('/auth/verify-2fa');\n        const canTryRefresh = res.status === 401 && this.refreshToken && !url.includes('/refresh') && !isAuthPublic && !options._retried;\n        if (canTryRefresh) {\n          const refreshed = await this.refresh();\n          if (refreshed) {\n            return this.request(url, {\n              ...options,\n              _retried: true\n            });\n          }\n        }\n\n        // Extract error message from response\n        const message = data && (data.message || data.error) || res.statusText;\n        const error = new Error(message || 'API error');\n        error.status = res.status;\n        error.data = data;\n        throw error;\n      }\n      return data;\n    } catch (error) {\n      // Handle network errors\n      if (!error.status) {\n        const networkError = new Error('Network error - unable to connect to server');\n        networkError.isNetworkError = true;\n        throw networkError;\n      }\n      throw error;\n    }\n  }\n  async refresh() {\n    try {\n      const res = await fetch(API_ENDPOINTS.AUTH.REFRESH, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.refreshToken}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await res.json();\n      if (res.ok && data.access_token) {\n        this.setAccessToken(data.access_token);\n        return true;\n      }\n    } catch (_) {}\n    this.logout();\n    return false;\n  }\n  logout() {\n    this.setAccessToken(null);\n    this.setRefreshToken(null);\n    localStorage.removeItem('user_role');\n    localStorage.removeItem('user_id');\n  }\n\n  // Auth\n  async login(email, password) {\n    const data = await this.request(API_ENDPOINTS.AUTH.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      }),\n      noAuth: true\n    });\n    if (data !== null && data !== void 0 && data.access_token) this.setAccessToken(data.access_token);\n    if (data !== null && data !== void 0 && data.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n  async verify2FA(email, code) {\n    const data = await this.request(API_ENDPOINTS.AUTH.VERIFY_2FA, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        code\n      }),\n      noAuth: true\n    });\n    if (data !== null && data !== void 0 && data.access_token) this.setAccessToken(data.access_token);\n    if (data !== null && data !== void 0 && data.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n  async register(userData) {\n    const data = await this.request(API_ENDPOINTS.AUTH.REGISTER, {\n      method: 'POST',\n      body: JSON.stringify(userData),\n      noAuth: true\n    });\n    return data;\n  }\n  async me() {\n    return this.request(API_ENDPOINTS.AUTH.ME);\n  }\n  async forgotPassword(payload) {\n    return this.request(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify(payload),\n      noAuth: true\n    });\n  }\n  async resetPassword(token, email, newPassword) {\n    return this.request(API_ENDPOINTS.AUTH.RESET_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        token,\n        email,\n        new_password: newPassword\n      }),\n      noAuth: true\n    });\n  }\n  async healthCheck() {\n    return this.request(API_ENDPOINTS.AUTH.HEALTH);\n  }\n\n  // Properties\n  async getProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.PROPERTIES.LIST}?${qs}` : API_ENDPOINTS.PROPERTIES.LIST;\n    return this.request(url);\n  }\n  async getProperty(id) {\n    return this.request(API_ENDPOINTS.PROPERTIES.DETAIL(id));\n  }\n  async createProperty(payload) {\n    return this.request(API_ENDPOINTS.PROPERTIES.CREATE, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    // Use legacy manager route for compatibility with current backend\n    const base = API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    const url = qs ? `${base}?${qs}` : base;\n    return this.request(url);\n  }\n\n  // Managed Properties\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.MY_PROPERTIES}?${qs}` : API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    return this.request(url);\n  }\n  async addProperty(payload) {\n    return this.request(API_ENDPOINTS.MANAGER.ADD_PROPERTY, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  // Units/Spaces for ManagedProperty\n  async listUnits(propertyId) {\n    // New manager endpoint returns { units: [...] }\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${propertyId}`);\n  }\n  async createUnit(managedPropertyId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async updateUnit(unitId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, {\n      method: 'PUT',\n      body: JSON.stringify(payload)\n    });\n  }\n  async deleteUnit(unitId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Admin\n  async adminDashboard() {\n    return this.request(API_ENDPOINTS.ADMIN.DASHBOARD);\n  }\n  async adminAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ANALYTICS}?${qs}` : API_ENDPOINTS.ADMIN.ANALYTICS;\n    return this.request(url);\n  }\n  async adminAllProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PROPERTIES;\n    return this.request(url);\n  }\n  async getPendingProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.PENDING_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.PENDING_PROPERTIES;\n    console.log('API Service - getPendingProperties called with:', {\n      params,\n      url\n    });\n    return this.request(url);\n  }\n  async approveProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.APPROVE_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async rejectProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.REJECT_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async getAllPortals(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PORTALS}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PORTALS;\n    return this.request(url);\n  }\n  async togglePortal(propertyId) {\n    return this.request(API_ENDPOINTS.ADMIN.TOGGLE_PORTAL(propertyId), {\n      method: 'POST'\n    });\n  }\n  async getPortalAnalytics() {\n    return this.request(API_ENDPOINTS.ADMIN.PORTAL_ANALYTICS);\n  }\n\n  // Admin Subscription Management\n  async getAdminSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLANS);\n  }\n  async createSubscriptionPlan(planData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLANS, {\n      method: 'POST',\n      body: JSON.stringify(planData)\n    });\n  }\n  async updateSubscriptionPlan(planId, planData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN(planId), {\n      method: 'PUT',\n      body: JSON.stringify(planData)\n    });\n  }\n  async deleteSubscriptionPlan(planId) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN(planId), {\n      method: 'DELETE'\n    });\n  }\n  async updateSubscriptionPlanFeatures(planId, featuresData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN_FEATURES(planId), {\n      method: 'PUT',\n      body: JSON.stringify(featuresData)\n    });\n  }\n  async getAdminSubscriptionStats() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_STATS);\n  }\n  async getAdminSubscribers() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIBERS);\n  }\n  async getAdminBillingHistory() {\n    return this.request(API_ENDPOINTS.ADMIN.BILLING_HISTORY);\n  }\n\n  // Soft helper to fetch payment transactions if backend route exists\n  get ADMIN_PAYMENT_TRANSACTIONS() {\n    return API_ENDPOINTS.ADMIN && API_ENDPOINTS.ADMIN.PAYMENT_TRANSACTIONS || '/api/admin/payment-transactions';\n  }\n  async createBillingEntry(billingData) {\n    return this.request(API_ENDPOINTS.ADMIN.CREATE_BILLING, {\n      method: 'POST',\n      body: JSON.stringify(billingData)\n    });\n  }\n  async updateBillingStatus(billId, statusData) {\n    return this.request(API_ENDPOINTS.ADMIN.UPDATE_BILLING_STATUS(billId), {\n      method: 'PUT',\n      body: JSON.stringify(statusData)\n    });\n  }\n\n  // Property Manager Subscription methods\n  async getSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PLANS);\n  }\n  async getCurrentSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.MY_SUBSCRIPTION);\n  }\n  async getBillingHistory() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.BILLING_HISTORY);\n  }\n  async getPaymentMethods() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PAYMENT_METHODS);\n  }\n  async upgradePlan(planId, paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.UPGRADE, {\n      method: 'POST',\n      body: JSON.stringify({\n        plan_id: planId,\n        payment_method_id: paymentMethodId\n      })\n    });\n  }\n  async addPaymentMethod(paymentData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.ADD_PAYMENT_METHOD, {\n      method: 'POST',\n      body: JSON.stringify(paymentData)\n    });\n  }\n  async removePaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.REMOVE_PAYMENT_METHOD(paymentMethodId), {\n      method: 'DELETE'\n    });\n  }\n  async setDefaultPaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.SET_DEFAULT_PAYMENT_METHOD(paymentMethodId), {\n      method: 'POST'\n    });\n  }\n  async processPayment(billingId, paymentData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PROCESS_PAYMENT(billingId), {\n      method: 'POST',\n      body: JSON.stringify(paymentData)\n    });\n  }\n\n  // Tenant specific methods\n  async getTenantInquiries() {\n    return this.request(API_ENDPOINTS.TENANT.INQUIRIES);\n  }\n  async sendTenantMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.TENANT.SEND_MESSAGE, {\n      method: 'POST',\n      body: JSON.stringify({\n        inquiry_id: inquiryId,\n        message\n      })\n    });\n  }\n  async startTenantInquiry(propertyId, message, unitId = null) {\n    return this.request(API_ENDPOINTS.TENANT.START_INQUIRY, {\n      method: 'POST',\n      body: JSON.stringify({\n        property_id: propertyId,\n        unit_id: unitId,\n        message\n      })\n    });\n  }\n\n  // Manager inquiry methods\n  async getManagerInquiries() {\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES);\n  }\n  async sendManagerMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES + 'send-message', {\n      method: 'POST',\n      body: JSON.stringify({\n        inquiry_id: inquiryId,\n        message\n      })\n    });\n  }\n\n  // Inquiry attachment methods\n  async uploadInquiryAttachments(inquiryId, files) {\n    const formData = new FormData();\n    files.forEach(file => {\n      formData.append('files', file);\n    });\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENTS(inquiryId), {\n      method: 'POST',\n      body: formData,\n      isFormData: true\n      // Don't set Content-Type header - browser will set it with boundary\n    });\n  }\n  async getInquiryAttachments(inquiryId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENTS(inquiryId));\n  }\n  async downloadInquiryAttachment(attachmentId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENT_DOWNLOAD(attachmentId), {\n      responseType: 'blob'\n    });\n  }\n  async deleteInquiryAttachment(attachmentId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENT(attachmentId), {\n      method: 'DELETE'\n    });\n  }\n  async assignTenantToProperty(inquiryId, propertyId, unitId = null, unitName = null) {\n    const payload = {\n      inquiry_id: inquiryId,\n      property_id: propertyId\n    };\n    if (unitId) {\n      payload.unit_id = unitId;\n    }\n    if (unitName) {\n      payload.unit_name = unitName;\n    }\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES + 'assign-tenant', {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n  async getActiveProperties(params = {}) {\n    // Sanitize params: drop empty strings/undefined/null to avoid backend 500s\n    const clean = Object.entries(params || {}).reduce((acc, [k, v]) => {\n      if (v === undefined || v === null) return acc;\n      if (typeof v === 'string' && v.trim() === '') return acc;\n      acc[k] = v;\n      return acc;\n    }, {});\n    const qs = new URLSearchParams(clean).toString();\n    // Use the new units API that serves managed units data\n    const url = qs ? `${API_ENDPOINTS.UNITS.ACTIVE}?${qs}` : API_ENDPOINTS.UNITS.ACTIVE;\n    return this.request(url);\n  }\n  async getTenantProfile() {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE);\n  }\n  async updateTenantProfile(profileData) {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n  async uploadTenantProfileImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.TENANT.PROFILE_UPLOAD_IMAGE, {\n      method: 'POST',\n      body: form,\n      // Let browser set Content-Type boundary\n      isFormData: true\n    });\n  }\n  async changeTenantPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.TENANT.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n  async twofaSetup() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_SETUP, {\n      method: 'POST'\n    });\n  }\n  async twofaEnable(code) {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_ENABLE, {\n      method: 'POST',\n      body: JSON.stringify({\n        code\n      })\n    });\n  }\n  async twofaDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_DISABLE, {\n      method: 'POST'\n    });\n  }\n  async twofaEmailEnable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_ENABLE, {\n      method: 'POST'\n    });\n  }\n  async twofaEmailDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_DISABLE, {\n      method: 'POST'\n    });\n  }\n\n  // Tenant Notification methods\n  async getTenantNotifications() {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATIONS);\n  }\n  async markNotificationAsRead(notificationId) {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATION_READ(notificationId), {\n      method: 'PUT'\n    });\n  }\n  async markAllNotificationsAsRead() {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATIONS_MARK_ALL_READ, {\n      method: 'PUT'\n    });\n  }\n  async deleteNotification(notificationId) {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATION_DELETE(notificationId), {\n      method: 'DELETE'\n    });\n  }\n  async getManagerProfile() {\n    // Refresh token from storage before making request\n    this.refreshTokenFromStorage();\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE);\n  }\n  async managerAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.ANALYTICS}?${qs}` : API_ENDPOINTS.MANAGER.ANALYTICS;\n    return this.request(url);\n  }\n  async updateManagerProfile(profileData) {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n  async changeManagerPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.MANAGER.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n  async managerTwofaEmailEnable() {\n    return this.request(API_ENDPOINTS.MANAGER.TWOFA_EMAIL_ENABLE, {\n      method: 'POST'\n    });\n  }\n  async managerTwofaEmailDisable() {\n    return this.request(API_ENDPOINTS.MANAGER.TWOFA_EMAIL_DISABLE, {\n      method: 'POST'\n    });\n  }\n\n  // Subscription and Billing methods\n  async getCurrentSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.MY_SUBSCRIPTION);\n  }\n  async getSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PLANS);\n  }\n  async upgradePlan(planId, paymentMethodId = null) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.UPGRADE, {\n      method: 'POST',\n      body: JSON.stringify({\n        plan_id: planId,\n        payment_method_id: paymentMethodId\n      })\n    });\n  }\n  async getBillingHistory() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.BILLING_HISTORY);\n  }\n  async getPaymentMethods() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PAYMENT_METHODS);\n  }\n  async addPaymentMethod(paymentMethodData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.ADD_PAYMENT_METHOD, {\n      method: 'POST',\n      body: JSON.stringify(paymentMethodData)\n    });\n  }\n  async removePaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.REMOVE_PAYMENT_METHOD(paymentMethodId), {\n      method: 'DELETE'\n    });\n  }\n  async setDefaultPaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.SET_DEFAULT_PAYMENT_METHOD(paymentMethodId), {\n      method: 'POST'\n    });\n  }\n  async createPaymentIntent(amount, currency = 'php') {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.CREATE_PAYMENT_INTENT, {\n      method: 'POST',\n      body: JSON.stringify({\n        amount,\n        currency\n      })\n    });\n  }\n  async cancelSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.CANCEL_SUBSCRIPTION, {\n      method: 'POST'\n    });\n  }\n\n  // Admin Document Management\n  async adminDocuments() {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENTS);\n  }\n  async updateDocumentStatus(documentId, status) {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENT_STATUS(documentId), {\n      method: 'PUT',\n      body: JSON.stringify({\n        status\n      })\n    });\n  }\n  async downloadDocument(documentId) {\n    const response = await fetch(API_ENDPOINTS.ADMIN.DOCUMENT_DOWNLOAD(documentId), {\n      headers: {\n        'Authorization': `Bearer ${this.accessToken}`\n      }\n    });\n    if (!response.ok) {\n      // Try to extract error message from response\n      let errorMessage = 'Failed to download document';\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n        if (errorData.details) {\n          errorMessage += `: ${errorData.details}`;\n        }\n      } catch (e) {\n        // If response is not JSON, use status text\n        errorMessage = response.statusText || errorMessage;\n      }\n      const error = new Error(errorMessage);\n      error.response = response;\n      throw error;\n    }\n    return response.blob();\n  }\n  async adminDocumentStats() {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENT_STATS);\n  }\n  async uploadPropertyImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.MANAGER.UPLOAD_PROPERTY_IMAGE, {\n      method: 'POST',\n      body: form,\n      isFormData: true\n    });\n  }\n  async uploadUnitImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.MANAGER.UPLOAD_UNIT_IMAGE, {\n      method: 'POST',\n      body: form,\n      isFormData: true\n    });\n  }\n}\nconst apiService = new ApiService();\nexport default apiService;","map":{"version":3,"names":["API_ENDPOINTS","ApiService","constructor","accessToken","localStorage","getItem","refreshToken","setAccessToken","token","setItem","removeItem","setRefreshToken","refreshTokenFromStorage","getHeaders","isFormData","noAuth","headers","hostname","window","location","includes","request","url","options","body","FormData","_","responseType","fetchOptions","res","fetch","ok","isAuthPublic","canTryRefresh","status","_retried","refreshed","refresh","errorText","text","errorData","JSON","parse","message","error","statusText","Error","data","blob","networkError","isNetworkError","AUTH","REFRESH","method","json","access_token","logout","login","email","password","LOGIN","stringify","refresh_token","verify2FA","code","VERIFY_2FA","register","userData","REGISTER","me","ME","forgotPassword","payload","FORGOT_PASSWORD","resetPassword","newPassword","RESET_PASSWORD","new_password","healthCheck","HEALTH","getProperties","params","qs","URLSearchParams","toString","PROPERTIES","LIST","getProperty","id","DETAIL","createProperty","CREATE","getMyProperties","base","MANAGER","MY_PROPERTIES","addProperty","ADD_PROPERTY","listUnits","propertyId","INQUIRIES","createUnit","managedPropertyId","updateUnit","unitId","deleteUnit","adminDashboard","ADMIN","DASHBOARD","adminAnalytics","ANALYTICS","adminAllProperties","ALL_PROPERTIES","getPendingProperties","PENDING_PROPERTIES","console","log","approveProperty","APPROVE_PROPERTY","rejectProperty","REJECT_PROPERTY","getAllPortals","ALL_PORTALS","togglePortal","TOGGLE_PORTAL","getPortalAnalytics","PORTAL_ANALYTICS","getAdminSubscriptionPlans","SUBSCRIPTION_PLANS","createSubscriptionPlan","planData","updateSubscriptionPlan","planId","SUBSCRIPTION_PLAN","deleteSubscriptionPlan","updateSubscriptionPlanFeatures","featuresData","SUBSCRIPTION_PLAN_FEATURES","getAdminSubscriptionStats","SUBSCRIPTION_STATS","getAdminSubscribers","SUBSCRIBERS","getAdminBillingHistory","BILLING_HISTORY","ADMIN_PAYMENT_TRANSACTIONS","PAYMENT_TRANSACTIONS","createBillingEntry","billingData","CREATE_BILLING","updateBillingStatus","billId","statusData","UPDATE_BILLING_STATUS","getSubscriptionPlans","SUBSCRIPTIONS","PLANS","getCurrentSubscription","MY_SUBSCRIPTION","getBillingHistory","getPaymentMethods","PAYMENT_METHODS","upgradePlan","paymentMethodId","UPGRADE","plan_id","payment_method_id","addPaymentMethod","paymentData","ADD_PAYMENT_METHOD","removePaymentMethod","REMOVE_PAYMENT_METHOD","setDefaultPaymentMethod","SET_DEFAULT_PAYMENT_METHOD","processPayment","billingId","PROCESS_PAYMENT","getTenantInquiries","TENANT","sendTenantMessage","inquiryId","SEND_MESSAGE","inquiry_id","startTenantInquiry","START_INQUIRY","property_id","unit_id","getManagerInquiries","sendManagerMessage","uploadInquiryAttachments","files","formData","forEach","file","append","ATTACHMENTS","getInquiryAttachments","downloadInquiryAttachment","attachmentId","ATTACHMENT_DOWNLOAD","deleteInquiryAttachment","ATTACHMENT","assignTenantToProperty","unitName","unit_name","getActiveProperties","clean","Object","entries","reduce","acc","k","v","undefined","trim","UNITS","ACTIVE","getTenantProfile","PROFILE","updateTenantProfile","profileData","uploadTenantProfileImage","form","PROFILE_UPLOAD_IMAGE","changeTenantPassword","currentPassword","confirmPassword","CHANGE_PASSWORD","current_password","confirm_password","twofaSetup","TWOFA_SETUP","twofaEnable","TWOFA_ENABLE","twofaDisable","TWOFA_DISABLE","twofaEmailEnable","TWOFA_EMAIL_ENABLE","twofaEmailDisable","TWOFA_EMAIL_DISABLE","getTenantNotifications","NOTIFICATIONS","markNotificationAsRead","notificationId","NOTIFICATION_READ","markAllNotificationsAsRead","NOTIFICATIONS_MARK_ALL_READ","deleteNotification","NOTIFICATION_DELETE","getManagerProfile","managerAnalytics","updateManagerProfile","changeManagerPassword","managerTwofaEmailEnable","managerTwofaEmailDisable","paymentMethodData","createPaymentIntent","amount","currency","CREATE_PAYMENT_INTENT","cancelSubscription","CANCEL_SUBSCRIPTION","adminDocuments","DOCUMENTS","updateDocumentStatus","documentId","DOCUMENT_STATUS","downloadDocument","response","DOCUMENT_DOWNLOAD","errorMessage","details","e","adminDocumentStats","DOCUMENT_STATS","uploadPropertyImage","UPLOAD_PROPERTY_IMAGE","uploadUnitImage","UPLOAD_UNIT_IMAGE","apiService"],"sources":["C:/Users/Lenovo/OneDrive/Desktop/Capstone-Project-jun/main-domain/frontend/src/services/api.js"],"sourcesContent":["import { API_ENDPOINTS } from '../config/api';\n\nclass ApiService {\n  constructor() {\n    // Backward compatibility: support legacy 'token' key as well\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n\n  setAccessToken(token) {\n    this.accessToken = token;\n    if (token) {\n      localStorage.setItem('access_token', token);\n      // Also write legacy key for compatibility with older code paths\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('token');\n    }\n  }\n\n  setRefreshToken(token) {\n    this.refreshToken = token;\n    if (token) localStorage.setItem('refresh_token', token);\n  }\n\n  refreshTokenFromStorage() {\n    // Refresh token from localStorage in case it was set after API service creation\n    this.accessToken = localStorage.getItem('access_token') || localStorage.getItem('token');\n    this.refreshToken = localStorage.getItem('refresh_token');\n  }\n\n  getHeaders({ isFormData = false, noAuth = false } = {}) {\n    const headers = {};\n    if (!isFormData) headers['Content-Type'] = 'application/json';\n    if (this.accessToken && !noAuth) headers['Authorization'] = `Bearer ${this.accessToken}`;\n    \n    // For subdomain requests, we need to handle the host properly\n    const hostname = window.location.hostname;\n    if (hostname.includes('.localhost')) {\n      // For subdomain requests, we'll rely on CORS instead of host headers\n      // since we can't set host headers from browser JavaScript\n    }\n    \n    return headers;\n  }\n\n  async request(url, options = {}) {\n    try {\n      // Refresh token from storage before each request to ensure we have the latest token\n      this.refreshTokenFromStorage();\n      \n      // Handle FormData - don't set Content-Type for FormData, browser will set it\n      const isFormData = options.isFormData || options.body instanceof FormData;\n      const headers = { ...this.getHeaders({ isFormData, noAuth: options.noAuth }), ...(options.headers || {}) };\n      \n      // Remove isFormData and responseType from options before passing to fetch\n      const { isFormData: _, responseType, ...fetchOptions } = options;\n      \n      const res = await fetch(url, {\n        ...fetchOptions,\n        headers,\n      });\n\n      // Handle blob responses\n      if (responseType === 'blob') {\n        if (!res.ok) {\n          // Attempt refresh on 401 only for protected endpoints (not public auth routes)\n          const isAuthPublic = url.includes('/auth/login') || url.includes('/auth/register') || url.includes('/auth/verify-2fa');\n          const canTryRefresh = res.status === 401 && this.refreshToken && !url.includes('/refresh') && !isAuthPublic && !options._retried;\n          if (canTryRefresh) {\n            const refreshed = await this.refresh();\n            if (refreshed) {\n              return this.request(url, { ...options, _retried: true });\n            }\n          }\n          \n          // Try to extract error message from blob response\n          const errorText = await res.text();\n          let errorData = null;\n          try {\n            errorData = errorText ? JSON.parse(errorText) : null;\n          } catch {\n            errorData = null;\n          }\n          \n          const message = (errorData && (errorData.message || errorData.error)) || res.statusText;\n          const error = new Error(message || 'API error');\n          error.status = res.status;\n          error.data = errorData;\n          throw error;\n        }\n        \n        // Return blob directly\n        return await res.blob();\n      }\n      \n      // Handle JSON/text responses\n      const text = await res.text();\n      let data = null;\n      try { \n        data = text ? JSON.parse(text) : null; \n      } catch { \n        data = null; \n      }\n\n      if (!res.ok) {\n        // Attempt refresh on 401 only for protected endpoints (not public auth routes)\n        const isAuthPublic = url.includes('/auth/login') || url.includes('/auth/register') || url.includes('/auth/verify-2fa');\n        const canTryRefresh = res.status === 401 && this.refreshToken && !url.includes('/refresh') && !isAuthPublic && !options._retried;\n        if (canTryRefresh) {\n          const refreshed = await this.refresh();\n          if (refreshed) {\n            return this.request(url, { ...options, _retried: true });\n          }\n        }\n        \n        // Extract error message from response\n        const message = (data && (data.message || data.error)) || res.statusText;\n        const error = new Error(message || 'API error');\n        error.status = res.status;\n        error.data = data;\n        throw error;\n      }\n      \n      return data;\n    } catch (error) {\n      // Handle network errors\n      if (!error.status) {\n        const networkError = new Error('Network error - unable to connect to server');\n        networkError.isNetworkError = true;\n        throw networkError;\n      }\n      throw error;\n    }\n  }\n\n  async refresh() {\n    try {\n      const res = await fetch(API_ENDPOINTS.AUTH.REFRESH, {\n        method: 'POST',\n        headers: { 'Authorization': `Bearer ${this.refreshToken}`, 'Content-Type': 'application/json' },\n      });\n      const data = await res.json();\n      if (res.ok && data.access_token) {\n        this.setAccessToken(data.access_token);\n        return true;\n      }\n    } catch (_) {}\n    this.logout();\n    return false;\n  }\n\n  logout() {\n    this.setAccessToken(null);\n    this.setRefreshToken(null);\n    localStorage.removeItem('user_role');\n    localStorage.removeItem('user_id');\n  }\n\n  // Auth\n  async login(email, password) {\n    const data = await this.request(API_ENDPOINTS.AUTH.LOGIN, {\n      method: 'POST',\n      body: JSON.stringify({ email, password }),\n      noAuth: true\n    });\n    if (data?.access_token) this.setAccessToken(data.access_token);\n    if (data?.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n\n  async verify2FA(email, code) {\n    const data = await this.request(API_ENDPOINTS.AUTH.VERIFY_2FA, {\n      method: 'POST',\n      body: JSON.stringify({ email, code }),\n      noAuth: true\n    });\n    if (data?.access_token) this.setAccessToken(data.access_token);\n    if (data?.refresh_token) this.setRefreshToken(data.refresh_token);\n    return data;\n  }\n\n  async register(userData) {\n    const data = await this.request(API_ENDPOINTS.AUTH.REGISTER, {\n      method: 'POST',\n      body: JSON.stringify(userData),\n      noAuth: true\n    });\n    return data;\n  }\n\n  async me() {\n    return this.request(API_ENDPOINTS.AUTH.ME);\n  }\n\n  async forgotPassword(payload) {\n    return this.request(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify(payload),\n      noAuth: true\n    });\n  }\n\n  async resetPassword(token, email, newPassword) {\n    return this.request(API_ENDPOINTS.AUTH.RESET_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({ token, email, new_password: newPassword }),\n      noAuth: true\n    });\n  }\n\n  async healthCheck() {\n    return this.request(API_ENDPOINTS.AUTH.HEALTH);\n  }\n\n  // Properties\n  async getProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.PROPERTIES.LIST}?${qs}` : API_ENDPOINTS.PROPERTIES.LIST;\n    return this.request(url);\n  }\n\n  async getProperty(id) {\n    return this.request(API_ENDPOINTS.PROPERTIES.DETAIL(id));\n  }\n\n  async createProperty(payload) {\n    return this.request(API_ENDPOINTS.PROPERTIES.CREATE, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    // Use legacy manager route for compatibility with current backend\n    const base = API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    const url = qs ? `${base}?${qs}` : base;\n    return this.request(url);\n  }\n\n  // Managed Properties\n  async getMyProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.MY_PROPERTIES}?${qs}` : API_ENDPOINTS.MANAGER.MY_PROPERTIES;\n    return this.request(url);\n  }\n\n  async addProperty(payload) {\n    return this.request(API_ENDPOINTS.MANAGER.ADD_PROPERTY, {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  // Units/Spaces for ManagedProperty\n  async listUnits(propertyId) {\n    // New manager endpoint returns { units: [...] }\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${propertyId}`);\n  }\n\n  async createUnit(managedPropertyId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${managedPropertyId}`, { method: 'POST', body: JSON.stringify(payload) });\n  }\n\n  async updateUnit(unitId, payload) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, { method: 'PUT', body: JSON.stringify(payload) });\n  }\n\n  async deleteUnit(unitId) {\n    return this.request(`${API_ENDPOINTS.MANAGER.INQUIRIES}units/${unitId}`, { method: 'DELETE' });\n  }\n\n\n  // Admin\n  async adminDashboard() {\n    return this.request(API_ENDPOINTS.ADMIN.DASHBOARD);\n  }\n\n  async adminAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ANALYTICS}?${qs}` : API_ENDPOINTS.ADMIN.ANALYTICS;\n    return this.request(url);\n  }\n\n  async adminAllProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PROPERTIES;\n    return this.request(url);\n  }\n\n  async getPendingProperties(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.PENDING_PROPERTIES}?${qs}` : API_ENDPOINTS.ADMIN.PENDING_PROPERTIES;\n    console.log('API Service - getPendingProperties called with:', { params, url });\n    return this.request(url);\n  }\n\n  async approveProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.APPROVE_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  async rejectProperty(propertyId, payload) {\n    return this.request(API_ENDPOINTS.ADMIN.REJECT_PROPERTY(propertyId), {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  async getAllPortals(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.ADMIN.ALL_PORTALS}?${qs}` : API_ENDPOINTS.ADMIN.ALL_PORTALS;\n    return this.request(url);\n  }\n\n  async togglePortal(propertyId) {\n    return this.request(API_ENDPOINTS.ADMIN.TOGGLE_PORTAL(propertyId), {\n      method: 'POST'\n    });\n  }\n\n  async getPortalAnalytics() {\n    return this.request(API_ENDPOINTS.ADMIN.PORTAL_ANALYTICS);\n  }\n\n  // Admin Subscription Management\n  async getAdminSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLANS);\n  }\n\n  async createSubscriptionPlan(planData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLANS, {\n      method: 'POST',\n      body: JSON.stringify(planData)\n    });\n  }\n\n  async updateSubscriptionPlan(planId, planData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN(planId), {\n      method: 'PUT',\n      body: JSON.stringify(planData)\n    });\n  }\n\n  async deleteSubscriptionPlan(planId) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN(planId), {\n      method: 'DELETE'\n    });\n  }\n\n  async updateSubscriptionPlanFeatures(planId, featuresData) {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_PLAN_FEATURES(planId), {\n      method: 'PUT',\n      body: JSON.stringify(featuresData)\n    });\n  }\n\n  async getAdminSubscriptionStats() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIPTION_STATS);\n  }\n\n  async getAdminSubscribers() {\n    return this.request(API_ENDPOINTS.ADMIN.SUBSCRIBERS);\n  }\n\n  async getAdminBillingHistory() {\n    return this.request(API_ENDPOINTS.ADMIN.BILLING_HISTORY);\n  }\n\n  // Soft helper to fetch payment transactions if backend route exists\n  get ADMIN_PAYMENT_TRANSACTIONS() {\n    return (API_ENDPOINTS.ADMIN && API_ENDPOINTS.ADMIN.PAYMENT_TRANSACTIONS) || '/api/admin/payment-transactions';\n  }\n\n  async createBillingEntry(billingData) {\n    return this.request(API_ENDPOINTS.ADMIN.CREATE_BILLING, {\n      method: 'POST',\n      body: JSON.stringify(billingData)\n    });\n  }\n\n  async updateBillingStatus(billId, statusData) {\n    return this.request(API_ENDPOINTS.ADMIN.UPDATE_BILLING_STATUS(billId), {\n      method: 'PUT',\n      body: JSON.stringify(statusData)\n    });\n  }\n\n  // Property Manager Subscription methods\n  async getSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PLANS);\n  }\n\n  async getCurrentSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.MY_SUBSCRIPTION);\n  }\n\n  async getBillingHistory() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.BILLING_HISTORY);\n  }\n\n  async getPaymentMethods() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PAYMENT_METHODS);\n  }\n\n  async upgradePlan(planId, paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.UPGRADE, {\n      method: 'POST',\n      body: JSON.stringify({ plan_id: planId, payment_method_id: paymentMethodId })\n    });\n  }\n\n  async addPaymentMethod(paymentData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.ADD_PAYMENT_METHOD, {\n      method: 'POST',\n      body: JSON.stringify(paymentData)\n    });\n  }\n\n  async removePaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.REMOVE_PAYMENT_METHOD(paymentMethodId), {\n      method: 'DELETE'\n    });\n  }\n\n  async setDefaultPaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.SET_DEFAULT_PAYMENT_METHOD(paymentMethodId), {\n      method: 'POST'\n    });\n  }\n\n  async processPayment(billingId, paymentData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PROCESS_PAYMENT(billingId), {\n      method: 'POST',\n      body: JSON.stringify(paymentData)\n    });\n  }\n\n  // Tenant specific methods\n  async getTenantInquiries() {\n    return this.request(API_ENDPOINTS.TENANT.INQUIRIES);\n  }\n\n  async sendTenantMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.TENANT.SEND_MESSAGE, {\n      method: 'POST',\n      body: JSON.stringify({ inquiry_id: inquiryId, message })\n    });\n  }\n\n  async startTenantInquiry(propertyId, message, unitId = null) {\n    return this.request(API_ENDPOINTS.TENANT.START_INQUIRY, {\n      method: 'POST',\n      body: JSON.stringify({ property_id: propertyId, unit_id: unitId, message })\n    });\n  }\n\n  // Manager inquiry methods\n  async getManagerInquiries() {\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES);\n  }\n\n  async sendManagerMessage(inquiryId, message) {\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES + 'send-message', {\n      method: 'POST',\n      body: JSON.stringify({ inquiry_id: inquiryId, message })\n    });\n  }\n\n  // Inquiry attachment methods\n  async uploadInquiryAttachments(inquiryId, files) {\n    const formData = new FormData();\n    files.forEach(file => {\n      formData.append('files', file);\n    });\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENTS(inquiryId), {\n      method: 'POST',\n      body: formData,\n      isFormData: true\n      // Don't set Content-Type header - browser will set it with boundary\n    });\n  }\n\n  async getInquiryAttachments(inquiryId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENTS(inquiryId));\n  }\n\n  async downloadInquiryAttachment(attachmentId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENT_DOWNLOAD(attachmentId), {\n      responseType: 'blob'\n    });\n  }\n\n  async deleteInquiryAttachment(attachmentId) {\n    return this.request(API_ENDPOINTS.INQUIRIES.ATTACHMENT(attachmentId), {\n      method: 'DELETE'\n    });\n  }\n\n  async assignTenantToProperty(inquiryId, propertyId, unitId = null, unitName = null) {\n    const payload = { inquiry_id: inquiryId, property_id: propertyId };\n    if (unitId) {\n      payload.unit_id = unitId;\n    }\n    if (unitName) {\n      payload.unit_name = unitName;\n    }\n    return this.request(API_ENDPOINTS.MANAGER.INQUIRIES + 'assign-tenant', {\n      method: 'POST',\n      body: JSON.stringify(payload)\n    });\n  }\n\n  async getActiveProperties(params = {}) {\n    // Sanitize params: drop empty strings/undefined/null to avoid backend 500s\n    const clean = Object.entries(params || {}).reduce((acc, [k, v]) => {\n      if (v === undefined || v === null) return acc;\n      if (typeof v === 'string' && v.trim() === '') return acc;\n      acc[k] = v;\n      return acc;\n    }, {});\n    const qs = new URLSearchParams(clean).toString();\n    // Use the new units API that serves managed units data\n    const url = qs ? `${API_ENDPOINTS.UNITS.ACTIVE}?${qs}` : API_ENDPOINTS.UNITS.ACTIVE;\n    return this.request(url);\n  }\n\n  async getTenantProfile() {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE);\n  }\n\n  async updateTenantProfile(profileData) {\n    return this.request(API_ENDPOINTS.TENANT.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n\n  async uploadTenantProfileImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.TENANT.PROFILE_UPLOAD_IMAGE, {\n      method: 'POST',\n      body: form,\n      // Let browser set Content-Type boundary\n      isFormData: true\n    });\n  }\n\n  async changeTenantPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.TENANT.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n\n  async twofaSetup() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_SETUP, { method: 'POST' });\n  }\n\n  async twofaEnable(code) {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_ENABLE, {\n      method: 'POST',\n      body: JSON.stringify({ code })\n    });\n  }\n\n  async twofaDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_DISABLE, { method: 'POST' });\n  }\n\n  async twofaEmailEnable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_ENABLE, { method: 'POST' });\n  }\n\n  async twofaEmailDisable() {\n    return this.request(API_ENDPOINTS.TENANT.TWOFA_EMAIL_DISABLE, { method: 'POST' });\n  }\n\n  // Tenant Notification methods\n  async getTenantNotifications() {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATIONS);\n  }\n\n  async markNotificationAsRead(notificationId) {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATION_READ(notificationId), {\n      method: 'PUT'\n    });\n  }\n\n  async markAllNotificationsAsRead() {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATIONS_MARK_ALL_READ, {\n      method: 'PUT'\n    });\n  }\n\n  async deleteNotification(notificationId) {\n    return this.request(API_ENDPOINTS.TENANT.NOTIFICATION_DELETE(notificationId), {\n      method: 'DELETE'\n    });\n  }\n\n  async getManagerProfile() {\n    // Refresh token from storage before making request\n    this.refreshTokenFromStorage();\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE);\n  }\n\n  async managerAnalytics(params = {}) {\n    const qs = new URLSearchParams(params).toString();\n    const url = qs ? `${API_ENDPOINTS.MANAGER.ANALYTICS}?${qs}` : API_ENDPOINTS.MANAGER.ANALYTICS;\n    return this.request(url);\n  }\n\n  async updateManagerProfile(profileData) {\n    return this.request(API_ENDPOINTS.MANAGER.PROFILE, {\n      method: 'PUT',\n      body: JSON.stringify(profileData)\n    });\n  }\n\n  async changeManagerPassword(currentPassword, newPassword, confirmPassword) {\n    return this.request(API_ENDPOINTS.MANAGER.CHANGE_PASSWORD, {\n      method: 'POST',\n      body: JSON.stringify({\n        current_password: currentPassword,\n        new_password: newPassword,\n        confirm_password: confirmPassword\n      })\n    });\n  }\n\n  async managerTwofaEmailEnable() {\n    return this.request(API_ENDPOINTS.MANAGER.TWOFA_EMAIL_ENABLE, { method: 'POST' });\n  }\n\n  async managerTwofaEmailDisable() {\n    return this.request(API_ENDPOINTS.MANAGER.TWOFA_EMAIL_DISABLE, { method: 'POST' });\n  }\n\n  // Subscription and Billing methods\n  async getCurrentSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.MY_SUBSCRIPTION);\n  }\n\n  async getSubscriptionPlans() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PLANS);\n  }\n\n  async upgradePlan(planId, paymentMethodId = null) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.UPGRADE, {\n      method: 'POST',\n      body: JSON.stringify({ plan_id: planId, payment_method_id: paymentMethodId })\n    });\n  }\n\n  async getBillingHistory() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.BILLING_HISTORY);\n  }\n\n  async getPaymentMethods() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.PAYMENT_METHODS);\n  }\n\n  async addPaymentMethod(paymentMethodData) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.ADD_PAYMENT_METHOD, {\n      method: 'POST',\n      body: JSON.stringify(paymentMethodData)\n    });\n  }\n\n  async removePaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.REMOVE_PAYMENT_METHOD(paymentMethodId), {\n      method: 'DELETE'\n    });\n  }\n\n  async setDefaultPaymentMethod(paymentMethodId) {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.SET_DEFAULT_PAYMENT_METHOD(paymentMethodId), {\n      method: 'POST'\n    });\n  }\n\n  async createPaymentIntent(amount, currency = 'php') {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.CREATE_PAYMENT_INTENT, {\n      method: 'POST',\n      body: JSON.stringify({ amount, currency })\n    });\n  }\n\n  async cancelSubscription() {\n    return this.request(API_ENDPOINTS.SUBSCRIPTIONS.CANCEL_SUBSCRIPTION, {\n      method: 'POST'\n    });\n  }\n\n  // Admin Document Management\n  async adminDocuments() {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENTS);\n  }\n\n  async updateDocumentStatus(documentId, status) {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENT_STATUS(documentId), {\n      method: 'PUT',\n      body: JSON.stringify({ status })\n    });\n  }\n\n  async downloadDocument(documentId) {\n    const response = await fetch(API_ENDPOINTS.ADMIN.DOCUMENT_DOWNLOAD(documentId), {\n      headers: {\n        'Authorization': `Bearer ${this.accessToken}`\n      }\n    });\n    \n    if (!response.ok) {\n      // Try to extract error message from response\n      let errorMessage = 'Failed to download document';\n      try {\n        const errorData = await response.json();\n        errorMessage = errorData.message || errorData.error || errorMessage;\n        if (errorData.details) {\n          errorMessage += `: ${errorData.details}`;\n        }\n      } catch (e) {\n        // If response is not JSON, use status text\n        errorMessage = response.statusText || errorMessage;\n      }\n      \n      const error = new Error(errorMessage);\n      error.response = response;\n      throw error;\n    }\n    \n    return response.blob();\n  }\n\n  async adminDocumentStats() {\n    return this.request(API_ENDPOINTS.ADMIN.DOCUMENT_STATS);\n  }\n\n  async uploadPropertyImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.MANAGER.UPLOAD_PROPERTY_IMAGE, {\n      method: 'POST',\n      body: form,\n      isFormData: true\n    });\n  }\n\n  async uploadUnitImage(file) {\n    const form = new FormData();\n    form.append('image', file);\n    return this.request(API_ENDPOINTS.MANAGER.UPLOAD_UNIT_IMAGE, {\n      method: 'POST',\n      body: form,\n      isFormData: true\n    });\n  }\n}\n\nconst apiService = new ApiService();\nexport default apiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}