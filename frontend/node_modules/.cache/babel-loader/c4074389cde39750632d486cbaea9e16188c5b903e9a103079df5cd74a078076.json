{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lenovo\\\\OneDrive\\\\Desktop\\\\Capstone-Project-jun\\\\main-domain\\\\frontend\\\\src\\\\components\\\\Tenants\\\\Notifications.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport apiService from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TenantNotifications = ({\n  isOpen,\n  onClose,\n  onUpdate\n}) => {\n  _s();\n  const [notifications, setNotifications] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const notificationRef = useRef(null);\n\n  // Fetch notifications\n  useEffect(() => {\n    if (isOpen) {\n      fetchNotifications();\n    }\n  }, [isOpen]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (notificationRef.current && !notificationRef.current.contains(event.target)) {\n        // Don't close if clicking on the notification bell button\n        if (!event.target.closest('[data-notification-button]')) {\n          onClose();\n        }\n      }\n    };\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, onClose]);\n  const fetchNotifications = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const data = await apiService.getTenantNotifications();\n      if (data && data.notifications) {\n        setNotifications(data.notifications);\n        const unread = data.notifications.filter(n => !n.is_read).length;\n        setUnreadCount(unread);\n      } else {\n        setNotifications([]);\n        setUnreadCount(0);\n      }\n    } catch (err) {\n      console.error('Failed to fetch notifications:', err);\n      setError('Failed to load notifications');\n      // Set empty array on error to show empty state\n      setNotifications([]);\n      setUnreadCount(0);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const markAsRead = async notificationId => {\n    try {\n      await apiService.markNotificationAsRead(notificationId);\n      setNotifications(prev => prev.map(n => n.id === notificationId ? {\n        ...n,\n        is_read: true\n      } : n));\n      setUnreadCount(prev => Math.max(0, prev - 1));\n      if (onUpdate) onUpdate();\n    } catch (err) {\n      console.error('Failed to mark notification as read:', err);\n    }\n  };\n  const markAllAsRead = async () => {\n    try {\n      await apiService.markAllNotificationsAsRead();\n      setNotifications(prev => prev.map(n => ({\n        ...n,\n        is_read: true\n      })));\n      setUnreadCount(0);\n      if (onUpdate) onUpdate();\n    } catch (err) {\n      console.error('Failed to mark all notifications as read:', err);\n    }\n  };\n  const deleteNotification = async notificationId => {\n    try {\n      await apiService.deleteNotification(notificationId);\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\n      // Update unread count if deleted notification was unread\n      const deleted = notifications.find(n => n.id === notificationId);\n      if (deleted && !deleted.is_read) {\n        setUnreadCount(prev => Math.max(0, prev - 1));\n      }\n      if (onUpdate) onUpdate();\n    } catch (err) {\n      console.error('Failed to delete notification:', err);\n    }\n  };\n  const formatTime = dateString => {\n    if (!dateString) return '';\n    try {\n      const date = new Date(dateString);\n      const now = new Date();\n\n      // Check if date is valid\n      if (isNaN(date.getTime())) {\n        return '';\n      }\n      const diffMs = now - date;\n\n      // Handle negative time (future dates)\n      if (diffMs < 0) {\n        return 'Just now';\n      }\n      const diffSecs = Math.floor(diffMs / 1000);\n      const diffMins = Math.floor(diffMs / 60000);\n      const diffHours = Math.floor(diffMs / 3600000);\n      const diffDays = Math.floor(diffMs / 86400000);\n      const diffWeeks = Math.floor(diffDays / 7);\n      const diffMonths = Math.floor(diffDays / 30);\n      if (diffSecs < 60) return 'Just now';\n      if (diffMins < 60) return `${diffMins}m ago`;\n      if (diffHours < 24) return `${diffHours}h ago`;\n      if (diffDays < 7) return `${diffDays}d ago`;\n      if (diffWeeks < 4) return `${diffWeeks}w ago`;\n      if (diffMonths < 12) return `${diffMonths}mo ago`;\n\n      // For older dates, show formatted date\n      return date.toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\n      });\n    } catch (error) {\n      console.error('Error formatting time:', error);\n      return '';\n    }\n  };\n  const getNotificationIcon = type => {\n    switch (type) {\n      // Inquiry-related notifications\n      case 'inquiry_response':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-blue-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this);\n      case 'inquiry_status_change':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-indigo-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this);\n\n      // Property-related notifications\n      case 'property_available':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-green-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this);\n      case 'property_update':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-yellow-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this);\n\n      // Viewing-related notifications\n      case 'viewing_confirmed':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-purple-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this);\n\n      // Account-related notifications\n      case 'account_update':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-teal-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this);\n\n      // System notifications\n      case 'system':\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-gray-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-5 h-5 text-gray-500\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this);\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: notificationRef,\n    className: \"absolute md:right-0 right-auto mt-2 w-full md:w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-gray-900\",\n        children: \"Notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: markAllAsRead,\n        className: \"text-xs text-blue-600 hover:text-blue-800 font-medium\",\n        children: \"Mark all as read\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-y-auto flex-1\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-500\",\n          children: \"Loading notifications...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-12 h-12 mx-auto mb-3 text-red-400\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchNotifications,\n          className: \"mt-3 text-sm text-blue-600 hover:text-blue-800\",\n          children: \"Try again\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }, this) : notifications.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"w-12 h-12 mx-auto mb-3 text-gray-400\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            strokeWidth: 2,\n            d: \"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"No new notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divide-y divide-gray-100\",\n        children: notifications.map(notification => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `p-4 hover:bg-gray-50 transition-colors cursor-pointer ${!notification.is_read ? 'bg-blue-50' : ''}`,\n          onClick: () => !notification.is_read && markAsRead(notification.id),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-shrink-0 mt-0.5\",\n              children: getNotificationIcon(notification.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 min-w-0\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `text-sm font-medium ${!notification.is_read ? 'text-gray-900' : 'text-gray-700'}`,\n                    children: notification.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500 mt-1 line-clamp-2\",\n                    children: notification.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-400 mt-1\",\n                    children: formatTime(notification.created_at)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-1 ml-2\",\n                  children: [!notification.is_read && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-2 h-2 bg-blue-500 rounded-full\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      deleteNotification(notification.id);\n                    },\n                    className: \"text-gray-400 hover:text-red-500 transition-colors\",\n                    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-4 h-4\",\n                      fill: \"none\",\n                      stroke: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M6 18L18 6M6 6l12 12\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 300,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 17\n          }, this)\n        }, notification.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n};\n_s(TenantNotifications, \"tDs+ghSlgOFcLAVX9wZERL3/WOY=\");\n_c = TenantNotifications;\nexport default TenantNotifications;\nvar _c;\n$RefreshReg$(_c, \"TenantNotifications\");","map":{"version":3,"names":["React","useState","useEffect","useRef","apiService","jsxDEV","_jsxDEV","TenantNotifications","isOpen","onClose","onUpdate","_s","notifications","setNotifications","loading","setLoading","error","setError","unreadCount","setUnreadCount","notificationRef","fetchNotifications","handleClickOutside","event","current","contains","target","closest","document","addEventListener","removeEventListener","data","getTenantNotifications","unread","filter","n","is_read","length","err","console","markAsRead","notificationId","markNotificationAsRead","prev","map","id","Math","max","markAllAsRead","markAllNotificationsAsRead","deleteNotification","deleted","find","formatTime","dateString","date","Date","now","isNaN","getTime","diffMs","diffSecs","floor","diffMins","diffHours","diffDays","diffWeeks","diffMonths","toLocaleDateString","month","day","year","getFullYear","undefined","getNotificationIcon","type","className","fill","stroke","viewBox","children","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","notification","title","message","created_at","e","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/Lenovo/OneDrive/Desktop/Capstone-Project-jun/main-domain/frontend/src/components/Tenants/Notifications.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport apiService from '../../services/api';\r\n\r\nconst TenantNotifications = ({ isOpen, onClose, onUpdate }) => {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const notificationRef = useRef(null);\r\n\r\n  // Fetch notifications\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchNotifications();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (notificationRef.current && !notificationRef.current.contains(event.target)) {\r\n        // Don't close if clicking on the notification bell button\r\n        if (!event.target.closest('[data-notification-button]')) {\r\n          onClose();\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  const fetchNotifications = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const data = await apiService.getTenantNotifications();\r\n      \r\n      if (data && data.notifications) {\r\n        setNotifications(data.notifications);\r\n        const unread = data.notifications.filter(n => !n.is_read).length;\r\n        setUnreadCount(unread);\r\n      } else {\r\n        setNotifications([]);\r\n        setUnreadCount(0);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch notifications:', err);\r\n      setError('Failed to load notifications');\r\n      // Set empty array on error to show empty state\r\n      setNotifications([]);\r\n      setUnreadCount(0);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const markAsRead = async (notificationId) => {\r\n    try {\r\n      await apiService.markNotificationAsRead(notificationId);\r\n      setNotifications(prev => \r\n        prev.map(n => \r\n          n.id === notificationId ? { ...n, is_read: true } : n\r\n        )\r\n      );\r\n      setUnreadCount(prev => Math.max(0, prev - 1));\r\n      if (onUpdate) onUpdate();\r\n    } catch (err) {\r\n      console.error('Failed to mark notification as read:', err);\r\n    }\r\n  };\r\n\r\n  const markAllAsRead = async () => {\r\n    try {\r\n      await apiService.markAllNotificationsAsRead();\r\n      setNotifications(prev => prev.map(n => ({ ...n, is_read: true })));\r\n      setUnreadCount(0);\r\n      if (onUpdate) onUpdate();\r\n    } catch (err) {\r\n      console.error('Failed to mark all notifications as read:', err);\r\n    }\r\n  };\r\n\r\n  const deleteNotification = async (notificationId) => {\r\n    try {\r\n      await apiService.deleteNotification(notificationId);\r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      // Update unread count if deleted notification was unread\r\n      const deleted = notifications.find(n => n.id === notificationId);\r\n      if (deleted && !deleted.is_read) {\r\n        setUnreadCount(prev => Math.max(0, prev - 1));\r\n      }\r\n      if (onUpdate) onUpdate();\r\n    } catch (err) {\r\n      console.error('Failed to delete notification:', err);\r\n    }\r\n  };\r\n\r\n  const formatTime = (dateString) => {\r\n    if (!dateString) return '';\r\n    \r\n    try {\r\n      const date = new Date(dateString);\r\n      const now = new Date();\r\n      \r\n      // Check if date is valid\r\n      if (isNaN(date.getTime())) {\r\n        return '';\r\n      }\r\n      \r\n      const diffMs = now - date;\r\n      \r\n      // Handle negative time (future dates)\r\n      if (diffMs < 0) {\r\n        return 'Just now';\r\n      }\r\n      \r\n      const diffSecs = Math.floor(diffMs / 1000);\r\n      const diffMins = Math.floor(diffMs / 60000);\r\n      const diffHours = Math.floor(diffMs / 3600000);\r\n      const diffDays = Math.floor(diffMs / 86400000);\r\n      const diffWeeks = Math.floor(diffDays / 7);\r\n      const diffMonths = Math.floor(diffDays / 30);\r\n\r\n      if (diffSecs < 60) return 'Just now';\r\n      if (diffMins < 60) return `${diffMins}m ago`;\r\n      if (diffHours < 24) return `${diffHours}h ago`;\r\n      if (diffDays < 7) return `${diffDays}d ago`;\r\n      if (diffWeeks < 4) return `${diffWeeks}w ago`;\r\n      if (diffMonths < 12) return `${diffMonths}mo ago`;\r\n      \r\n      // For older dates, show formatted date\r\n      return date.toLocaleDateString('en-US', { \r\n        month: 'short', \r\n        day: 'numeric',\r\n        year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\r\n      });\r\n    } catch (error) {\r\n      console.error('Error formatting time:', error);\r\n      return '';\r\n    }\r\n  };\r\n\r\n  const getNotificationIcon = (type) => {\r\n    switch (type) {\r\n      // Inquiry-related notifications\r\n      case 'inquiry_response':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\r\n          </svg>\r\n        );\r\n      case 'inquiry_status_change':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-indigo-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n        );\r\n      \r\n      // Property-related notifications\r\n      case 'property_available':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n          </svg>\r\n        );\r\n      case 'property_update':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n          </svg>\r\n        );\r\n      \r\n      // Viewing-related notifications\r\n      case 'viewing_confirmed':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n        );\r\n      \r\n      // Account-related notifications\r\n      case 'account_update':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-teal-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\r\n          </svg>\r\n        );\r\n      \r\n      // System notifications\r\n      case 'system':\r\n        return (\r\n          <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n        );\r\n      \r\n      default:\r\n        return (\r\n          <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div \r\n      ref={notificationRef}\r\n      className=\"absolute md:right-0 right-auto mt-2 w-full md:w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden flex flex-col\"\r\n    >\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-gray-200 flex items-center justify-between bg-gray-50\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900\">Notifications</h3>\r\n        {unreadCount > 0 && (\r\n          <button\r\n            onClick={markAllAsRead}\r\n            className=\"text-xs text-blue-600 hover:text-blue-800 font-medium\"\r\n          >\r\n            Mark all as read\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Notifications List */}\r\n      <div className=\"overflow-y-auto flex-1\">\r\n        {loading ? (\r\n          <div className=\"p-8 text-center\">\r\n            <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\r\n            <p className=\"mt-2 text-sm text-gray-500\">Loading notifications...</p>\r\n          </div>\r\n        ) : error ? (\r\n          <div className=\"p-8 text-center\">\r\n            <svg className=\"w-12 h-12 mx-auto mb-3 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n            <p className=\"text-sm text-gray-500\">{error}</p>\r\n            <button\r\n              onClick={fetchNotifications}\r\n              className=\"mt-3 text-sm text-blue-600 hover:text-blue-800\"\r\n            >\r\n              Try again\r\n            </button>\r\n          </div>\r\n        ) : notifications.length === 0 ? (\r\n          <div className=\"p-8 text-center\">\r\n            <svg className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\r\n            </svg>\r\n            <p className=\"text-sm text-gray-500\">No new notifications</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"divide-y divide-gray-100\">\r\n            {notifications.map((notification) => (\r\n              <div\r\n                key={notification.id}\r\n                className={`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${\r\n                  !notification.is_read ? 'bg-blue-50' : ''\r\n                }`}\r\n                onClick={() => !notification.is_read && markAsRead(notification.id)}\r\n              >\r\n                <div className=\"flex items-start space-x-3\">\r\n                  <div className=\"flex-shrink-0 mt-0.5\">\r\n                    {getNotificationIcon(notification.type)}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <p className={`text-sm font-medium ${\r\n                          !notification.is_read ? 'text-gray-900' : 'text-gray-700'\r\n                        }`}>\r\n                          {notification.title}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">\r\n                          {notification.message}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-400 mt-1\">\r\n                          {formatTime(notification.created_at)}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-1 ml-2\">\r\n                        {!notification.is_read && (\r\n                          <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                        )}\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            deleteNotification(notification.id);\r\n                          }}\r\n                          className=\"text-gray-400 hover:text-red-500 transition-colors\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                          </svg>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TenantNotifications;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}